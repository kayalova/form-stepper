"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var FormStepper=function(){function t(e){_classCallCheck(this,t),this.forms=e,this.index=0}return _createClass(t,[{key:"isLast",value:function(){return this.index===this.forms.length-1}},{key:"isFirst",value:function(){return 0===this.index}},{key:"next",value:function(){if(!this.isLast())return this.index+=1,this.forms[this.index]}},{key:"prev",value:function(){if(!this.isFirst())return--this.index,this.forms[this.index]}}]),t}();function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var forms=_toConsumableArray(document.querySelectorAll(".form")),formContainer=document.querySelector(".form-wrapper"),btnContainer=document.querySelector(".btn-wrapper"),successMsg=document.querySelector(".success-container"),btnNext=document.querySelector("#next"),btnPrev=document.querySelector("#prev"),btnSend=document.querySelector("#send"),formStepper=new FormStepper(forms);function showSuccessMsg(){successMsg.classList.remove("hidden")}function hideForms(){formContainer.classList.add("hidden"),btnContainer.classList.add("hidden")}function removeErrorText(e){e.nextElementSibling.classList.add("transparent")}function showErrorText(e){var t=getInvalidInputs(e),r=getInvalidCheckbox(e);[].concat(_toConsumableArray(t),_toConsumableArray(r)).forEach(addErrorStyle)}function addErrorStyle(e){e.nextElementSibling.classList.remove("transparent")}function getInvalidCheckbox(e){return _toConsumableArray(e.elements).filter(function(e){return"checkbox"===e.type&&!e.checked})}function getInvalidInputs(e){return _toConsumableArray(e.querySelectorAll("[required]")).filter(function(e){return 0===e.value.trim().length})}function updateButtonView(e){var t=e.forms,r=e.index;btnPrev.disabled=0===r,btnPrev.disabled?btnPrev.classList.add("disabled"):btnPrev.classList.contains("disabled")&&btnPrev.classList.remove("disabled"),r===t.length-1?(btnNext.classList.add("hidden"),btnSend.classList.remove("hidden")):(btnNext.classList.contains("hidden")&&btnNext.classList.remove("hidden"),btnSend.classList.add("hidden"))}function updateFormView(e){var t=e.index,r=e.forms;r.forEach(function(e){e===r[t]?e.classList.add("form__active"):e.classList.contains("form__active")&&e.classList.remove("form__active")})}function isValidForm(e){var t=!0,r=getInvalidInputs(e),n=getInvalidCheckbox(e);return(0<r.length||0<n.length)&&(t=!1),t}btnPrev.addEventListener("click",function(){formStepper.prev(),updateFormView(formStepper),updateButtonView(formStepper)}),btnNext.addEventListener("click",function(){var e=formStepper.index,t=formStepper.forms,r=isValidForm(t[e]);if(!r)return showErrorText(t[e]);formStepper.next(r),updateFormView(formStepper),updateButtonView(formStepper)}),btnSend.addEventListener("click",function(){var e=formStepper.index,t=formStepper.forms;if(!isValidForm(t[e]))return showErrorText(t[e]);hideForms(),showSuccessMsg()}),forms.forEach(function(o){o.addEventListener("input",function(e){var t=e.target,r=formStepper.index,n=formStepper.forms;o===n[r]&&removeErrorText(t)})});